language: python

sudo: false

python:
- nightly
- 3.5
- 3.4
- 3.3
- 3.2
- 2.7
- 2.6
- pypy

env:
- PYTEST=2.9.2
- PYTEST=2.9.1
- PYTEST=2.9.0
- PYTEST=2.8.7
- PYTEST=2.8.6
- PYTEST=2.8.5

matrix:
  allow_failures:
  - python: nightly

before_install:
- PY=$(python -V 2>&1 | sed 's/[^0-9]//g;s/.//3g;2s/.*/py/;$!d')
- test $PY == 32 && TOX='virtualenv<14 tox' || TOX=tox
- export TOXENV=py$PY-pytest${PYTEST//./}-travis

install:
- pip install $TOX
- tox --notest

script: tox
